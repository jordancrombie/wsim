# WSIM Backend Configuration

# Server
NODE_ENV=development
PORT=3003

# =============================================================================
# URLs - Choose ONE of the following configurations:
# =============================================================================

# Option 1: Local standalone development (no BSIM integration)
# APP_URL=http://localhost:3003
# FRONTEND_URL=http://localhost:3004
# AUTH_SERVER_URL=http://localhost:3005

# Option 2: BSIM-orchestrated dev environment (recommended)
APP_URL=https://wsim-dev.banksim.ca
FRONTEND_URL=https://wsim-dev.banksim.ca
AUTH_SERVER_URL=https://wsim-auth-dev.banksim.ca

# =============================================================================
# Database
# =============================================================================
DATABASE_URL=postgresql://postgres:password@localhost:5432/wsim

# =============================================================================
# Security (CHANGE THESE IN PRODUCTION!)
# =============================================================================
JWT_SECRET=dev-jwt-secret-change-in-production
SESSION_SECRET=dev-session-secret-change-in-production
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef

# =============================================================================
# BSIM Providers (JSON array)
# =============================================================================
# Each provider needs: bsimId, name, issuer, clientId, clientSecret
# Optional: apiUrl (if BSIM API is at a different URL than derived from issuer)
#
# For BSIM-orchestrated dev environment:
BSIM_PROVIDERS='[{"bsimId":"bsim","name":"Bank Simulator","issuer":"https://auth-dev.banksim.ca","apiUrl":"https://dev.banksim.ca","clientId":"wsim-wallet","clientSecret":"wsim-dev-secret"}]'

# For local standalone development (BSIM running locally):
# BSIM_PROVIDERS='[{"bsimId":"bsim","name":"Bank Simulator","issuer":"http://localhost:3002","clientId":"wsim-wallet","clientSecret":"wsim-secret"}]'

# =============================================================================
# CORS (comma-separated origins)
# =============================================================================
CORS_ORIGINS=https://wsim-dev.banksim.ca,https://wsim-auth-dev.banksim.ca,https://ssim-dev.banksim.ca,https://dev.banksim.ca

# =============================================================================
# Agent Commerce (SACP)
# =============================================================================
# JWT secret for signing agent access tokens (CHANGE IN PRODUCTION!)
AGENT_JWT_SECRET=dev-agent-jwt-secret-change-in-production

# Agent access token expiry (default: 1 hour)
# Supports duration strings: "1h", "30m", "3600" (seconds)
AGENT_ACCESS_TOKEN_EXPIRY=1h

# Payment token secret (CHANGE IN PRODUCTION!)
PAYMENT_TOKEN_SECRET=dev-payment-token-secret-change-in-production

# Payment token expiry (default: 5 minutes)
# Supports duration strings: "5m", "300" (seconds)
PAYMENT_TOKEN_EXPIRY=5m

# Step-up request expiry in minutes (default: 15)
STEP_UP_EXPIRY_MINUTES=15

# Timezone for daily limit reset (default: America/Toronto)
DAILY_LIMIT_RESET_TIMEZONE=America/Toronto

# =============================================================================
# OAuth Client Secrets (for confidential clients)
# =============================================================================
# Format: OAUTH_CLIENT_SECRET_<CLIENT_ID_UPPERCASE>
# These are used by server-side OAuth clients (ChatGPT, Gemini, SACP Gateway)

# SACP Gateway - Used for guest checkout flow (CHANGE IN PRODUCTION!)
# The Gateway uses this to authenticate with WSIM when processing checkouts
OAUTH_CLIENT_SECRET_SACP_GATEWAY=dev-sacp-gateway-secret-change-in-production

# ChatGPT Connector (if used)
# OAUTH_CLIENT_SECRET_CHATGPT=your-chatgpt-secret

# Google Gemini (if used)
# OAUTH_CLIENT_SECRET_GEMINI=your-gemini-secret

# =============================================================================
# Introspection Credentials (for SSIM merchants)
# =============================================================================
# Multiple clients supported via JSON array (recommended):
# INTROSPECTION_CLIENTS='[{"clientId":"ssim-merchant","clientSecret":"secret1"},{"clientId":"sacp-gateway","clientSecret":"secret2"}]'
#
# Legacy single-client format (backwards compatible):
INTROSPECTION_CLIENT_ID=ssim_introspect
INTROSPECTION_CLIENT_SECRET=dev-introspection-secret-change-in-production
